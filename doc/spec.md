# Kucipong 仕様

## サービス概要

お店のクーポンをユーザ向けにカスタマイズして表示する。

## モデルアプリ

### シュフー チラシ

https://itunes.apple.com/jp/app/shufu-chirashiapuri/id373909230?mt=8
https://play.google.com/store/apps/details?id=com.toppan.shufoo.android&hl=ja
http://app-liv.jp/373909230/

### Groupon（グルーポン)

https://play.google.com/store/apps/details?id=com.groupon&hl=ja

### インドネシア国内

https://www.foodpanda.co.id/
http://katalogpromosi.com/
https://lakupon.com/
https://evoucher.co.id/

## UIイメージ

https://prottapp.com/p/0eb526#/s/5715c3bf4942fb56c5730180

## プラットフォーム

* Webアプリとして開発
    * スマホネイティブを考慮した実装
    * サポートブラウザはモダンブラウザ
        * html5, flexboxをふつうに使ってOK
        * IE8,9 あたりは必要になった段階でpolyfillを入れる
* 場合によってはその後ネイティブアプリ化
    * ハイブリッドアプリにするかも
    * PhoneGapでもいいし、React Nativeでもいいし、Elm Nativeかもしれない

## 絶対にやること

* Haskellの流布/教育に利用できるようにする
* 動くものを完成させる
* 広告サービスではなく、マッチングサービスに見えるようにする

## KPI

現段階では特に追わない。

## ユーザーストーリー

ベータ版公開時くらいのイメージで、下記のストーリーを達成できるように機能設計する。

### 一般ユーザ

クーポンを探して利用する側のユーザ。
一般ユーザにはログイン機能がなくても、ブラウザにデータを保存できる"localStorage"に情報をいれておけば、スマホなどで使うぶんには特に不便がないはず。

* メールアドレスを収集する必要がある
* 異なるブラウザや端末から同一ユーザがサービスを利用するケースが無視できない
* なんらかのビジネス上の都合でフロント側をめちゃめちゃ拡充する必要が出てきた場合
* なんらかの理由で一般ユーザの個人情報を保持したい需要が今後出てきて、localStorageにsensitive dataを置く必要がでてきてしまった場合

などの場合は、ログイン機能を実装すべき。

また、各種設定はチャット形式のUIで提供することにより、下記のメリットを享受できる。

* 「自分向けにクーポンを探してくれるサービスなんだ！」という印象をあたえる
* 「すごいAIが搭載されていて近未来っぽい！」と思い込ませることができる
    * (実際には単に事前に用意した会話例にしたがって進むだけ)
* 一般ユーザが、明確に「次に何をすべきか」を知ることができるので、離脱率が低くなる
* 一般ユーザを、思い通りに誘導しやすい
* 岡本の十八番な手法なので、わりと実装が容易

#### Case1. はじめてのユーザ

1. kucipong サービスのトップページ（カテゴリページ）にたどり着く
2. いきなりチャットアプリみたいな画面が立ち上がって、猫ちゃんが次のように話しかけてきた
    * kucipong は、私がご主人様（あなた）のために、ご主人様にピッタリなクーポンを見つけ出すサービスですにゃ
    * まずは、ご主人様の主な活動エリアの住所や建物名を教えてほしいですにゃ
3. 萌えたので、まんまと自宅の住所を記入してしまったところ、下に地図が表示されて、その周辺の地図が表示された
    * Google Map APIなどを使っているのだろう
4. 猫ちゃんが「職場付近など、他にもエリアを登録しますかにゃ？？」と聞いてきたが、私は無職に〜となので入力しなかった
5. 猫ちゃんが「ご主人様の興味がある分野を教えてほしいにゃん！！」とかわいくおねだりしてきた
6. とりあえず「日本食」「ベジタリアン」「ファッション」「ゴスロリ」「アルパカ」「ヤギ」を選択してみた
7. 猫ちゃんに「これでご主人様にぴったりなクーポンを探せるにゃ！ これからも、ご主人様の行動にあわせて、吾輩も賢くなっていくから、期待しててにゃん！！」と言われてニヤニヤしている自分に気づく
8. チャット画面が閉じられて、「カテゴリ選択」の画面になったので、とりあえず「グルメ」を押してみる
9. オススメ順でグルメ関連のクーポンが表示されている
    * さっき登録したカテゴリや、活動エリアにあったクーポンが表示されていて、猫ちゃんが頑張ってくれているのを実感する
10. 途中までスクロールすると、どうやら「無限スクロール」形式のようだ
11. 近所の寿司バーのクーポンがあったので、タップしてみた
12. カリフォルニアロールや、どぶろくのクーポンがある
13. 確か近くにポケストがあったので、ルアーモジュールを使いながら寿司でも食べよう

#### Case2. 再訪ユーザ

1. 昨日はうまい寿司を食べながら、ポケモンをたくさん狩ることができた
    * コイキング寿司も食べてみたいものだ
2. 今日も無職なので、やることがなくて暇だから、kucipongを使ってみよう
3. なんと、猫ちゃんに会えるのは初回だけかと思ったら、またチャット画面が開いて猫ちゃんに会うことができた
    * もしかしたら、その日の最初にアクセスした時には、猫ちゃんと話せるのかもしれない
    * 「ご主人様！ おかえりにゃさい！ 吾輩はまたご主人様に会えて嬉しいのにゃ！」
    * 「前回、ご主人様がチェックしたクーポンの情報から、もっとご主人様が気に入ってくれるクーポンを選んできたのにゃ」
4. カテゴリ一覧が表示されたので、とりあえずまた「グルメ」を押してみる
5. 昨日と比べて、心なしか寿司レストランが多く表示されている気がする
    * 昨日、寿司バーのクーポンをチェックしたのを、猫ちゃんが見ててくれたんだな
6. でも、残念だがコイキングの寿司を提供してくれる店はないようだ
    * だって現実世界にはコイキングはいないのだから
    * さすがに私だって現実とゲームの区別くらいつく
7. 今日は Tempura のお店が良さそうだ
8. ちょっとカロリーが高いので、ポケモンGoで寄り道しながら行こう

#### Case2. 再訪ユーザ（いつもと異なる活動エリア）

1. 明日は渡米した娘が１年ぶりに帰ってくる。空港まで迎えに行くついでに近くでなにかおいしい物をごちそうしてやろう
2. こういう時にも、kucipongの猫ちゃんはいいクーポンを選んでくれるのだろうか
3. なんと、またチャット画面が開いて猫ちゃんに会うことができた
    * 「ご主人様！ おかえりにゃさい！ 吾輩はまたご主人様に会えて嬉しいのにゃ！」
    * 「前回、ご主人様がチェックしたクーポンの情報から、もっとご主人様が気に入ってくれるクーポンを選んできたのにゃ」
4. カテゴリ一覧が表示されたので、また「グルメ」を押してみる
5. さすがに、猫ちゃんは私が明日空港に行くことを知らないようだ
    * どれも登録した活動エリアのクーポンだ
6. 上のところに「別のエリアのクーポンを見たい方」というボタンがあるのでおしてみた
7. なんと、また猫ちゃんが現れた
    * 「新しい活動エリアの住所や建物名を登録してほしいにゃ！」
8. 「スカルノ・ハッタ国際空港」と入力したところ、下に地図が表示されて、その周辺の地図が表示された
    * 住所でなくてもいいのは楽でいい
    * そういえば、日本では、デヴィ・スカルノ夫人がお笑い芸人をしているらしいと聞いたことがある
9. 猫ちゃんが「こちらのエリアのクーポン情報は、明日からも表示した方がいいですかにゃ？」と聞かれたので「いらにゃいよ」と答えておいた
10. 再びグルメクーポンの画面が開き、空港あたりのクーポンが並ぶようになった
11. 空港あたりの寿司レストランのクーポンがあったので、そこにすることにした
12. そういえば、娘は幼い頃、ポケモンの絵が描かれた飛行機に乗りたがっていたことを思い出した

#### Case3. お気に入り機能

1. 明日は渡米した娘が１年ぶりに帰ってくる。空港まで迎えに行くついでに近くでなにかおいしい物をごちそうしてやろう
2. こういう時にも、kucipongの猫ちゃんはいいクーポンを選んでくれるのだろうか
3. なんと、またチャット画面が開いて猫ちゃんに会うことができた
    * 「ご主人様！ おかえりにゃさい！ 吾輩はまたご主人様に会えて嬉しいのにゃ！」
    * 「前回、ご主人様がチェックしたクーポンの情報から、もっとご主人様が気に入ってくれるクーポンを選んできたのにゃ」
4. カテゴリ一覧が表示されたので、また「グルメ」を押してみる
5. さすがに、猫ちゃんは私が明日空港に行くことを知らないようだ
    * どれも登録した活動エリアのクーポンだ
6. 上のところに「別のエリアのクーポンを見たい方」というボタンがあるのでおしてみた
7. なんと、また猫ちゃんが現れた
    * 「新しい活動エリアの住所や建物名を登録してほしいにゃ！」
8. 「スカルノ・ハッタ国際空港」と入力したところ、下に地図が表示されて、その周辺の地図が表示された
    * 住所でなくてもいいのは楽でいい
9. 猫ちゃんが「こちらのエリアのクーポン情報は、明日からも表示した方がいいですかにゃ？」と聞かれたので「いらにゃいよ」と答えておいた
10. 再びグルメクーポンの画面が開き、空港あたりのクーポンが並ぶようになった
11. 空港あたりの寿司レストランのクーポンがあったので、タップしてみた
12. 右上のハートマークを押したら、ハートが赤くなった。どうやら、これでいつでもこのクーポンをすぐに見つけられるらしい
13. ためしにトップメニューのハートマークを押してみたら、今の寿司レストランが登録されていた
14. これなら、直前までポケモンGoをやっていても、すぐにクーポンを探し出せるだろう

### 企業ユーザ

自社のクーポンを掲載する側のユーザ。
企業ユーザは、あまりITに慣れていない方にも使いやすいように、パスワードをなくし、メールアドレスのみでログインできる"Magic sign-in"のような形式でアカウント管理する。

また、新規ユーザ登録機能は存在せず、kucipong との契約締結後、スタッフが登録する。

#### Case1. はじめてのユーザ

1. kucipong というサービスの人が営業に来たので、なんだかよくわからないが契約した
2. 後日、「kucipongに店舗登録しました」というメールが届いていたので、メール内のリンクをクリックしたところ、これでログインできたようだ
3. いきなり情報登録フォームが表示されたので、下記情報を記入した
    * 店名 (自由記述)
    * 業種 (選択式 / 「グルメ」「ファッション」など)
    * 業種詳細 (選択式 / 「焼き肉」「日本食」など)
    * 取り扱い商品のイメージ写真 (画像選択)
    * お店のセールスポイント
    * 店舗の住所 (自由記述)
    * 店舗の電話番号 (自由記述)
    * 営業時間 (自由記述)
    * 定休日 (自由記述)
    * オフィシャルサイトURL (自由記述)
4. 最後に、「クーポン情報」というボタンがあったので、押してみると、クーポン用の情報を要求された
    * クーポンイメージ写真 (画像選択)
    * クーポンタイトル (自由記述)
    * クーポン有効期限 (選択式)
    * クーポン種別 (選択式)
        * お買い上げ額から割引
        * お買い上げ時にプレゼント
        * クーポン限定セット
        * その他
5. 「クーポン種別」で「お買い上げ額から割引」を選択したところ、次の情報を要求された
    * 割引率 (数字を入力)
    * クーポン利用可能なお買い上げ総額 (最低額を数字で入力)
    * その他適用条件 (自由記述)
6. これでクーポンが登録されたようだ

#### Case2. 再訪ユーザ (お買い上げ時にプレゼント式のクーポンを追加)

1. kucipong から、「先月のクーポン閲覧数」というメールが届いた
    * 先月、うちの店のクーポンを見た一般ユーザの人数を教えてくれるらしい
2. メールの最後に「クーポンを更新・追加することで、より多くのお客様の目に触れるようになります」と書いてあったので、久しぶりにkucipongを開いた
3. 店舗情報ページの上部に、「クーポン情報」というボタンがあったので、押してみると、これまでに登録したクーポン一覧ページに飛んだ
4. 「クーポンの追加」を押すと以下の情報を要求された
    * クーポンイメージ写真 (画像選択)
    * クーポンタイトル (自由記述)
    * クーポン有効期限 (選択式)
    * クーポン種別 (選択式)
        * お買い上げ額から割引
        * お買い上げ時にプレゼント
        * クーポン限定セット
        * その他
5. 「クーポン種別」で「お買い上げ時にプレゼント」を選択したところ、次の情報を要求された
    * プレゼント内容 (自由記述)
    * プレゼント参考価格 (「非売品」または数字入力を選択)
    * クーポン利用可能なお買い上げ総額 (最低額を数字で入力)
    * その他適用条件 (自由記述)
6. クーポン登録後、クーポン一覧ページが表示され、今登録したクーポンが登録されていることを確認できた

#### Case3. 再訪ユーザ (クーポン限定セット式のクーポンを追加)

1. kucipong から、「先月のクーポン閲覧数」というメールが届いた
    * 先月、うちの店のクーポンを見た一般ユーザの人数を教えてくれるらしい
2. メールの最後に「クーポンを更新・追加することで、より多くのお客様の目に触れるようになります」と書いてあったので、久しぶりにkucipongを開いた
3. 店舗情報ページの上部に、「クーポン情報」というボタンがあったので、押してみると、これまでに登録したクーポン一覧ページに飛んだ
4. 「クーポンの追加」を押すと以下の情報を要求された
    * クーポンイメージ写真 (画像選択)
    * クーポンタイトル (自由記述)
    * クーポン有効期限 (選択式)
    * クーポン種別 (選択式)
        * お買い上げ額から割引
        * お買い上げ時にプレゼント
        * クーポン限定セット
        * その他
5. 「クーポン種別」で「クーポン限定セット」を選択したところ、次の情報を要求された
    * セット内容 (自由記述)
    * セット参考価格 (「非売品」または数字入力を選択)
    * その他適用条件 (自由記述)
6. クーポン登録後、クーポン一覧ページが表示され、今登録したクーポンが登録されていることを確認できた

#### Case4. 再訪ユーザ (クーポン編集)

1. kucipong から、「先月のクーポン閲覧数」というメールが届いた
    * 先月、うちの店のクーポンを見た一般ユーザの人数を教えてくれるらしい
2. メールの最後に「クーポンを更新・追加することで、より多くのお客様の目に触れるようになります」と書いてあったので、久しぶりにkucipongを開いた
3. 店舗情報ページの上部に、「クーポン情報」というボタンがあったので、押してみると、これまでに登録したクーポン一覧ページに飛んだ
4. 「クーポンの追加」を押すと以下の情報を編集できるようになった
    * クーポンイメージ写真 (画像選択)
    * クーポンタイトル (自由記述)
    * クーポン有効期限 (選択式)
    * (クーポン種別は、前回選択した「クーポン限定セット」から変更できないようだ)
    * セット内容 (自由記述)
    * セット参考価格 (「非売品」または数字入力を選択)
    * その他適用条件 (自由記述)
6. クーポン編集後、クーポン一覧ページが表示され、今編集したクーポンが反映されていることを確認できた

#### Case5. 再訪ユーザ (店舗情報の編集)

1. kucipong から、「先月のクーポン閲覧数」というメールが届いた
    * 先月、うちの店のクーポンを見た一般ユーザの人数を教えてくれるらしい
2. メールの最後に「店舗情報をより魅力的にすることで、より多くのお客様の目に触れるようになります」という説明と、具体的な改善方法が書いてあったので、久しぶりにkucipongを開いた
3. 下記の店舗情報が編集できるようになっている
    * 店名 (自由記述)
    * 業種 (選択式 / 「グルメ」「ファッション」など)
    * 業種詳細 (選択式 / 「焼き肉」「日本食」など)
    * 取り扱い商品のイメージ写真 (画像選択)
    * お店のセールスポイント
    * 店舗の住所 (自由記述)
    * 店舗の電話番号 (自由記述)
    * 営業時間 (自由記述)
    * 定休日 (自由記述)
    * オフィシャルサイトURL (自由記述)
4. これで店舗情報が更新されたようだ

### 管理者ユーザ

kucipong スタッフが利用する、magic sign-in 方式のアカウント。

#### 企業ユーザの追加

1. 営業スタッフから、「このメールアドレスを登録してほしい」と連絡があった
2. kucipong 管理画面にログインし、「ユーザの追加」を選択
3. メールアドレスの入力欄が表示されたので、入力して「追加」ボタンを押した
4. これで終わったので、営業スタッフに「終わった」と伝えた

#### 企業ユーザの削除

1. 営業スタッフから、「このメールアドレスを削除してほしい」と連絡があった
2. kucipong 管理画面にログインし、「ユーザの削除」を選択
3. メールアドレスの入力欄が表示されたので、入力して「削除」ボタンを押した
4. 「焼き肉・安々を削除しますか？ 削除する場合は、『焼き肉・安々』と入力して「OK」を押してください」と表示された
5. 店舗名を入力して、「OK」を押すと、無事に削除が完了したようだ
6. これで終わったので、営業スタッフに「終わった」と伝えた

#### 企業ユーザとしてログイン

1. 店主さんから「使い方がわからないので、手伝って」と頼まれた
2. kucipong 管理画面にログインし、「企業ユーザとしてログイン」を選択
3. メールアドレスの入力欄が表示されたので、入力して「ログイン用メールを送信」ボタンを押した
4. kucipong の管理画面に登録しているメールアドレスにメールが届いた
    * 「こちらのURLから、xxxとしてログインできます」
5. URLをクリックすると、店舗のトップページが表示された
6. 企業ユーザの機能が全機能使えるので、一から全部店主に変わってこちらで設定した
